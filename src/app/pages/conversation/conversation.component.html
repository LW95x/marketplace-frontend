<div class="conversation-container">
  <h1 class="conversation-header">Conversation</h1>

  <form (ngSubmit)="sendMessage(message)">
    <div *ngIf="receiverUser" class="text-content">
      <h3 class="conversation-sub-header">To: {{ receiverUser.userName }}</h3>
      <textarea
        id="message"
        [(ngModel)]="message"
        name="message"
        required
      ></textarea>

      <button mat-flat-button class="custom-button" type="submit">Send Message</button>
    </div>
  </form>

  <div class="conversation-card">
      <div *ngFor="let message of conversation" class="conversation-card-item" [ngStyle]="{'background-color': message.receiverId === userId ? '#D6CFDB' : 'white' }">
        <img [src]="message.senderId === userId ? receiverUser.imageUrl : senderUser.imageUrl" alt="User Avatar" class="user-image">
    <div class="text-content">
        <b>
          {{ message.senderId === userId ? 'To' : 'From' }}
          {{ message.senderId === userId ? message.receiverUsername : message.senderUsername }}
        </b>
        <hr/>
        <br/>
        <p>{{ message.senderUsername }}: {{ message.content }}</p>
        <br/>
        <hr/>
        <i>{{ message.sentTime | date : "HH:mm - dd/MM/yyyy" }}</i>
      </div>
    </div>
  </div>
</div>
